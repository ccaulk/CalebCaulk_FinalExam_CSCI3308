<%- include('../partials/header'); -%>
<%- include('../partials/menu'); -%> 
  <main>
    <div class="p-3 mb-2 bg-dark text-white">
      <div class="container-fluid" style="padding: 2%; ">
        <form class="" action="/main" method="post">
          <div class="row">
            <div class="col-3">
            </div>
            <div class="col-5">
              <input class="form-control" type="text" name="title" placeholder="Enter Search text">
            </div>
            <div class="col-1">
              <input class="btn btn-light" type="submit" name="Submit" value = "Submit"/>
            </div>
          </div>
        </form>
      </div>
    </div>
    </main>
    <div class="container-lg" style="margin-top: 2%;">
    <!-- adding the movie -->
      <%if(item){
      <!-- card group to have the picture line up -->
        var cards = '<div class="card-group">';
        var card = '<div class="card border-0"><div class="card-body">';
        var title = item.Title;
        var poster = item.Poster;
        var cast = item.Actors;
        var genre = item.Genre;
        var plot = item.Plot;
        var date = item.Released;
        var ratings = item.Ratings;
        <!-- adding the image to one card-->
        card += '<img class="card-img-top" src='+poster+' alt="Card image cap">';
        card += '</div></div>';
        cards += card;
        <!-- making a new card to add the other stats -->
        card = '<div class="card border-0"><div class="card-body">';
        card += '<h3 class="card-title">'+title+'</h3>';
        card += '</br>';
        card += '<h6 class = card-title>Cast:</h6>';
        card += '</br>';
        card += '<p class = card-text>'+cast+'</p>';
        card += '</br>';
        card += '<h6 class = card-title>Genre:</h6>';
        card += '</br>';
        card += '<p class = card-text>'+genre+'</p>';
        card += '</br>';
        card += '<h6 class = card-title>Plot:</h6>';
        card += '</br>';
        card += '<p class = card-text>'+plot+'</p>';
        card += '</br>';
        card += '<h6 class = card-title>Release Date:</h6>';
        card += '</br>';
        card += '<p class = card-text>'+date+'</p>';
        card += '</br>';
        card += '<h6 class = card-title>Ratings:</h6>';
        card += '</br>';
        ratings.forEach(function(rating){
          card += '<p class = card-text>'+rating.Source+': '+rating.Value+'</p>';
        })
        card += '<a href="#myModal" class="btn btn-info" data-toggle="modal">Add a Review</a>';
        card += '</div></div>';
        cards += card;
        cards += '</div>';
        %>
        <!-- displaying the cards -->
        <%- cards %>
      <% } %>
    </div>
    <div id="myModal" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Add a Review</h4>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <form class="" action="/main" method="post">
                <div class="row">
                  <div class="col-4">
                    <label for="movieTitle">Movie Title: </label>
                  </div>
                  <div class="col-8">
                    <input class="form-control" type="text" name="title" placeholder= <%-title%> disabled>
                    <%console.log(title);%>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
  </div>

<%- include('../partials/footer'); -%>